<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Palanter Demo</title>

    <!-- React and JQuery -->
    <script src="https://unpkg.com/react@15/dist/react.min.js"></script>
    <script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

    <!-- Opal and Hyperloop -->
    <script src="https://rawgit.com/ruby-hyperloop/hyperloop-js/master/opal-compiler.min.js"></script>
    <script src="https://rawgit.com/ruby-hyperloop/hyperloop-js/master/hyperloop.min.js"></script>

    <link href="https://rawgit.com/jonathancecil/palantir/5b36f1ec656ace9af6c3f2d8f41e0813a098f3e6/palantir.css" rel="stylesheet">
    <script type="text/javascript" src="https://rawgit.com/jonathancecil/palantir/5b36f1ec656ace9af6c3f2d8f41e0813a098f3e6/palantir.js"></script>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <script script type="text/ruby" src="components.rb"></script>

    <script type="text/javascript">

       /* You must provide the base URL of the compare server */
       var compareServerUrl = 'http://hybridcompare.azurewebsites.net';

       window.startComparison = function(pagesElementId, changesTreeId) {
         var xhr = new XMLHttpRequest();
         xhr.onload = function() {
           var comparisonUrl = compareServerUrl + xhr.getResponseHeader('location');
           var options = {
             comparisonUrl: comparisonUrl,
             pagesID: pagesElementId,
             changesTreeId: changesTreeId
           };
           window.palantirRenderComparison(options);
         };
         xhr.open('POST', window.compareServerUrl + '/api/compare', true);
         var formElement = document.getElementById('choose');
         xhr.send(new FormData(formElement));
         return false;
       };
     </script>

  </head>

  <body>
    <div data-hyperloop-mount="TopLevelComponent"></div>
    <p></p>
    <div style="margin:10px;">
      <div id="changes-tree"></div>
      <div id="comparison-document"></div>
    </div>

  </body>

</html>
